# Methodology Notes

본 문서는 분석 과정에서 사용한 통계적 선택과 그 근거를 설명합니다.  
인과적 해석이 아닌 **연관성 탐색**을 목적으로 합니다.

---

## 1. 데이터 전처리
- **PySpark 사용 이유**: 데이터 크기가 비교적 크고, 추후 확장성을 고려해 Pandas 대신 PySpark로 전처리.
- **집계 단위**: `uid-week` 단위로 앱 사용량, 설문 점수, 수면 지표를 통합.
- **결측치 처리**: 평균 대체(Mean Imputation) 방식 사용 → 단순하지만 모든 참여자를 분석에 포함할 수 있음.
- **중심화(centered variables)**: 회귀 해석 시 상호작용항 해석 안정화를 위해 mean-centering 수행.

---

## 2. 정규성 검정
- 앱 사용량 분포는 극단적으로 치우친 **비정규 분포**를 보임.
- **Shapiro-Wilk, D’Agostino-Pearson 검사** 결과 모두 p < .001 → 정규성 가정 위배.
- 따라서 Pearson 상관 대신 **Spearman 순위 상관계수(ρ)** 사용.

---

## 3. 상관분석
- **Spearman ρ**는 변수 간 순위 기반 연관성을 측정하므로 비정규 분포와 이상치에 강건함.
- p-value를 함께 계산하여 **유의미성 검정** 수행.
- 히트맵에 ρ와 유의수준(*: p<0.05)을 시각적으로 표시하여 직관적 해석 가능.

---

## 4. 회귀 및 조절효과 분석
- **분석 목적**: 수면 지표(`mean_confidence_sleep`)가 앱 사용량 ↔ 정신건강 점수 간 관계를 조절하는지 확인.
- **모형**:
  - Step 1: `Y ~ X` (앱 사용량)  
  - Step 2: `Y ~ X + Sleep` (앱 사용량 + 수면)  
  - Step 3: `Y ~ X + Sleep + X*Sleep` (상호작용 포함)
- **중심화**: X, Sleep 모두 평균 중심화(mean-centering)하여 상호작용 해석 안정화.
- **조절효과 시각화**:
  - Sleep 질을 `-1 SD, 평균, +1 SD` 수준으로 나누어 단순 기울기(simple slope) 분석.
  - 예: `MAPS × Sleep → PHQ-9`에서 Sleep이 높을 때는 음의 기울기, 낮을 때는 양의 기울기를 보여 조절효과 확인.

---

## 5. 다중공선성 점검
- 상호작용항은 본질적으로 다중공선성을 증가시킬 수 있음.
- `VIF (Variance Inflation Factor)` 계산:
  - 모든 조합에서 VIF < 10 → 다중공선성은 수용 가능 범위.

---

## 6. 방법론적 한계
- **인과 추론 불가**: 상관 및 회귀 결과는 연관성만 보여줌.
- **자기보고식 설문**: PHQ-9, GAD-7, Stress 점수는 주관적 응답 기반.
- **샘플 크기 제한**: 완전 참여자(8주 모두 응답)가 제한적 → 일반화에 주의 필요.
- **잠재적 교란 변수 미통제**: 연령, 성별, 사회경제적 요인 고려하지 못함.

---

## 7. 향후 개선 방향
- **패널 데이터 모형**: 사용자 고정효과(fixed effect), 시점 고정효과 추가.
- **비선형 모형**: 스플라인 회귀, 혼합모형 적용.
- **다중 비교 보정**: 카테고리별 다중 상관·회귀 시 False Discovery Rate(FDR) 보정.
- **다양한 수면 지표**: 중간각성(mid-awake)뿐 아니라 총수면시간, 수면효율 등 확장.

---

## 8. 결론
- **Spearman 상관 → 낮은 수준의 연관성** 확인.  
- **회귀·조절효과 → 수면이 앱 사용과 정신건강의 관계를 변형할 가능성** 시사.  
- 데이터와 방법론에 한계가 있지만, **디지털 웰빙 연구의 탐색적 기초 분석**으로 기여 가능.
